<!DOCTYPE html>
    <head>
        <title>
            SpellingBee
        </title>
        <link rel="stylesheet" href="styles.css">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <h2 id="title"> SPELLING BEE </h2>
        <div id="border">
            <div id="grid"></div>
        </div>
        <audio id="correctsoundeffect" src="correct.mp3" preload="auto"></audio>
        <script lang="JavScript">
            document.getElementById('title').innerHTML += "<br>"
            document.getElementById('title').textContent += "Find the following word:"

            const correctsound = document.getElementById("correctsoundeffect");
            const words = ["ABYSS","BROKE","CRAMP","DANCE","EMPTY","FRANK","GATES","HOLDS","IGLOO","JUICE","KEEPS","LAKES","MOUSE","NIGHT","OPENS","POINT","QUEEN","ROVER","STAMP","TUNES","ULTRA","VOICE","WOKEN"]
            const letters = ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z"]
            const beepositions=[186,211,236]

            let boxes;
            let neededletters;
            let count = 0;
            let wordcount = 0;


            function generateWord() {
                let wordindex = Math.floor(Math.random()*23)
                neededletters = words[wordindex].split('')
                document.getElementById('title').textContent += words[wordindex]
            }

            function generateGrid() {
                let i=0
                while (i<450) {
                i=i+1
                const board = document.getElementById('grid')
                const square = document.createElement('div')
                board.appendChild(square)
                }
                boxes = document.querySelectorAll('#grid div')
                }

            function generateLetters() {
                boxes.forEach(box => {
                boxes.textContent = " ";
                boxes.className = '';
                });
                setTimeout(5000)

                for (let i=0; i<10; i++) {
                let letterindex=Math.floor(Math.random() * 26 )
                let currentletter=letters[letterindex]
                let letterposition=Math.floor(Math.random() * 450)
                boxes[letterposition].textContent = currentletter
                boxes[letterposition].classList.add('text');
                }
                for (let i=0; i<5; i++) {
                let currentletter=neededletters[i]
                let letterposition=Math.floor(Math.random() * 450)
                boxes[letterposition].textContent = currentletter
                boxes[letterposition].classList.add('text');
                console.log(currentletter)
                }
                for (let i=0; i<5; i++) {
                let currentletter=neededletters[i]
                let letterposition=Math.floor(Math.random() * 450)
                boxes[letterposition].textContent = currentletter
                boxes[letterposition].classList.add('text');
                console.log(currentletter)
                }
            }

            function moveSnake() {
                let currentword = ""
                const tail = beepositions.pop();
                let pickedletter = boxes[tail].textContent
                boxes[tail].className = '';
                boxes[tail].textContent = "";
                if (letters.includes(pickedletter) ) {
                    if (count<4) {
                        if (neededletters[count]==pickedletter) {
                            console.log("picked the right letter")
                            correctsound.play()
                        }
                        else {
                            alert("That's the wrong letter! GAME OVER!")
                            setInterval(10000)
                            location.reload()
                        }
                    } else {
                        wordcount=wordcount+1
                        console.log("got a full word!")
                        setWord();
                    }
                    count=count+1
                }
            
                let newHead = beepositions[0];
                if (currentDirection === 'up') newHead -= 25;
                if (currentDirection === 'down') newHead += 25;
                if (currentDirection === 'left') newHead -= 1;
                if (currentDirection === 'right') newHead += 1;
                beepositions.unshift(newHead);

                beepositions.forEach((pos, index) => {
                    boxes[pos].className = '';

                if (index === 0) {
                    if (currentDirection === "left" || currentDirection === "right") {
                        boxes[pos].classList.add('snake-horizontal-head');
                    } else {
                        boxes[pos].classList.add('snake-vertical-head');
                    }
                } else {
                    if (currentDirection === "left" || currentDirection === "right") {
                        boxes[pos].classList.add('snake-horizontal');
                    } else {
                        boxes[pos].classList.add('snake-vertical');
                    }
                }
                });
            }

            let currentDirection = "up"
            document.addEventListener('keydown', (event) => {
            switch (event.key) {
                case 'ArrowUp':
                currentDirection = 'up';
                break;
                case 'ArrowDown':
                currentDirection = 'down';
                break;
                case 'ArrowLeft':
                currentDirection = 'left';
                break;
                case 'ArrowRight':
                currentDirection = 'right';
                break;
                }
            });

            function setWord() {
                generateWord();
                generateLetters();
            }
            generateGrid();
            setTimeout(5000)
            setWord()
            setInterval(moveSnake,150)

        </script>
    </body>
</html>